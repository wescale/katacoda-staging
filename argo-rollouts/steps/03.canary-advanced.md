# Canary advanced

A canary deployment is really useful in the case of web servers, as the load can get balanced on new nodes and you can check if the new pod takes well to the load compared to the old pods. If we have control over the Ingress, we can shape the traffic sent to those canary pods to better suit them to the upgrade (e.g. send less traffic for new pods, or ensure that a client using the canary pods will not alternate between the canary and the stable release.).

First, we'll create a Rollout, two Services and one Ingress.  The services at creation should be identical except for the name - Argo will modify them to add a selector depending on the stable and canary releases.

You can inspect the manifests in the folder `03.canary-advanced`.
Apply them with `kubectl apply -f /assets/03.canary-advanced/`{{execute HOST1}}.

You should now be able to access the application with both links on the top page. #TODO 


