Veuillez patienter en attendant que nous installons les éléments suivants :
- Nginx Ingress Controller
- Argo Rollouts Dashboard<br/>
Katacoda prend parfois son temps, soyez patient !

# C'est parti
Pour commencer, nous allons installer Argo Rollouts, depuis les fichiers officiels, dans son propre namespace (que nous avons préalablement créé) :
`kubectl get namespace argo-rollouts`{{execute HOST1}}

`kubectl apply -n argo-rollouts -f https://github.com/argoproj/argo-rollouts/releases/latest/download/install.yaml`{{execute HOST1}}

Ce manifeste créé les CRDs Argo Rollouts, les Services Account nécessaires, Les ClusterRoles, et les trois Controllers : Sensor Controller, EventBus Controller and EventSource Controller.

> Un CRD est un plugin Kubernetes permettant de créer des nouvelles APIs. Ces APIs sont reliées aux controllers que nous crééons à côté, qui ne sont tout autre que des pods.

Nous allons aussi installer le plugin Kubernetes CLI argo-rollouts, qui nous permettra d'effectuer plus d'actions manuelles sur nos déploiements : 

```bash
curl -LO https://github.com/argoproj/argo-rollouts/releases/latest/download/kubectl-argo-rollouts-linux-amd64
chmod +x ./kubectl-argo-rollouts-linux-amd64
sudo mv ./kubectl-argo-rollouts-linux-amd64 /usr/local/bin/kubectl-argo-rollouts
```{{execute HOST1}}

Vous pouvez la bonne installation de ce plugin avec la commande suivante : 
`kubectl argo rollouts version`{{execute HOST1}}

# Une interface graphique, pour faciliter le suivi

Pour pouvoir suivre les déploiements graphiquement, nous pouvons lancer un dashboard localement ou l'installer sur le cluster.
Pour le but de cet exercice, nous avons déjà installé le dashboard sur le cluster dans le namespace `argo-rollouts`.

Vous pouvez accéder à ce dashboard en lançant un port-forward en background ainsi : 
`kubectl port-forward svc/argo-rollouts-dashboard -n argo-rollouts 80:3100 --address='0.0.0.0' &`{{execute HOST1}}
